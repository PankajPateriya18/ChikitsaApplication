<div th:fragment="content">

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"/>

    <style>
        body {
            background-color: #f6faff;
        }
        .card {
            border-radius: 10px;
        }
        .detail-label {
            font-weight: 600;
        }
        .patient-table {
	        width: 100%;
	        table-layout: fixed;
	    }
	
	    /* Fix width for Download column */
	    .patient-table th:nth-child(3),
	    .patient-table td:nth-child(3) {
	        width: 120px;
	        text-align: center;
	    }
	
	    /* File Name column takes remaining space */
	    .patient-table td:nth-child(2),
	    .patient-table th:nth-child(2) {
	        white-space: normal;
	        word-break: break-word;
	    }
    </style>

    <div class="row justify-content-center mt-4">
        <div class="col-lg-6 col-md-7 col-sm-10 card shadow p-4 bg-white">

			<div class="d-flex justify-content-between align-items-center mb-4">
			    <a href="/patients" class="btn btn-secondary px-4">‚Üê Back</a>
			    <h3 class="mx-auto mb-0">Patient Details Page</h3>
			    <span style="visibility:hidden;">.</span>
			</div>

            <form th:object="${patient}">

                <div class="mb-3">
                    <label class="detail-label">Registration Number</label>
                    <input type="text" th:field="*{registrationNumber}"
                           class="form-control" readonly/>
                </div>

                <div class="mb-3">
                    <label class="detail-label">Full Name</label>
                    <input type="text" th:field="*{fullName}"
                           class="form-control" readonly/>
                </div>

                <div class="mb-3">
                    <label class="detail-label">Father's Name</label>
                    <input type="text" th:field="*{fatherName}"
                           class="form-control" readonly/>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label class="detail-label">Age</label>
                        <input type="number" th:field="*{age}"
                               class="form-control" readonly/>
                    </div>

                    <div class="col-md-4">
                        <label class="detail-label">Sex</label>
                        <input type="text" th:field="*{sex}"
                               class="form-control" readonly/>
                    </div>

                    <div class="col-md-4">
                        <label class="detail-label">Religion</label>
                        <input type="text" th:field="*{religion}"
                               class="form-control" readonly/>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="detail-label">Diagnosis</label>
                    <textarea th:field="*{diagnosis}" rows="2"
                              class="form-control" readonly></textarea>
                </div>

                <div class="mb-3">
                    <label class="detail-label">Mobile</label>
                    <div class="input-group">
                        <span class="input-group-text">+91</span>
                        <input type="text" th:field="*{mobile}" class="form-control" readonly/>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="detail-label">Email</label>
                    <input type="email" th:field="*{email}"
                           class="form-control" readonly/>
                </div>

                <div class="mb-3">
                    <label class="detail-label">Address</label>
                    <textarea th:field="*{address}" rows="2"
                              class="form-control" readonly></textarea>
                </div>
                
                <div class="mb-3">
                    <label>Case Taking *</label>
                    <textarea th:field="*{casetaking}" rows="4"
                              class="form-control required-field"
                              placeholder="Enter Case Taking" readonly></textarea>
                </div>
                
                <div class="mb-3">
                    <label>Next Appointment *</label>
                    <input type="text" th:field="*{nextAppointment}"
                           class="form-control required-field"
                           placeholder="Enter Next Appointment"readonly/>
                </div>
                
                <div class="mb-3 table-container mt-3">
					<label for="files">Uploaded Documents</label>
					<table border="1" class="table table-bordered table-hover patient-table mb-0">
					    <thead>
					    <tr>
					        <th style="display:none;">ID</th>
					        <th>File Name</th>
					        <th>Download</th>
					    </tr>
					    </thead>
					
					    <tbody>
					    <tr th:each="file : ${files}">
					        <td style="display:none;" th:text="${file.id}"></td>
					        <td th:text="${file.fileName}"></td>
					        <td><a class="btn btn-info btn-sm" th:href="@{|/document/download/${file.id}|}">Download</a></td>
					    </tr>
					    </tbody>
					</table>
                </div>

				<div class="col-md-4">
				   <label class="detail-label">Date</label>
				    <input type="date"
				           th:value="${#temporals.format(patient.date, 'yyyy-MM-dd')}"
				           class="form-control"
				           readonly />
				</div>

            </form>

        </div>
    </div>

</div>
